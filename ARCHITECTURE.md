# axiOS Enterprise Architecture Reference

> Auto-generated by kcalvelli-portal on 2026-01-30.
> Source: projects.json (15 projects, 14 categories)
> Upload this file to Claude Projects for complete system context.

## System Context

Keith Calvelli's project ecosystem is a collection of 15 open-source projects organized into 14 functional categories. The system is built on NixOS (axiOS) as the foundational platform, with MCP (Model Context Protocol) servers providing AI integration across multiple domains.

### Core Platform

- **axiOS** (kcalvelli/axios): A modular NixOS distribution. The foundational framework that all ecosystem projects build upon. Provides declarative system configuration via Nix flakes with modules, packages, home-manager integration, and development shells.

### Key Subsystems

- **AI Services**: axiOS AI Mail, axiOS AI Chat -- AI-powered communication tools integrated into the axiOS ecosystem
- **MCP Infrastructure**: MCP Journal, Nix Devshell MCP, Ultimate64 MCP, MCP Gateway, axiOS DAV -- Model Context Protocol servers bridging Claude to system capabilities
- **Retro Computing**: C64 Stream Viewer, Ultimate64 MCP, C64 Terminal -- Commodore 64 hardware integration with modern Linux
- **Developer Tooling**: Nix Devshell MCP, Brave Previews, Engineering Portal -- Development environment and documentation tools
- **Other**: Peregrinatio RPG (tabletop gaming), Orthoterm (Orthodox liturgical calendar)

## Project Inventory

### System

System Frameworks

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| axiOS | kcalvelli/axios | Nix | Released (v2026.01.13) | A modular NixOS distribution |

### axiOS Ecosystem

Tools designed for the axiOS framework

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| axiOS Monitor | kcalvelli/axios-monitor | QML/KDE | In Development | DMS plugin for monitoring and managing axiOS systems |
| axiOS AI Mail | kcalvelli/axios-ai-mail | Python | In Development | AI-powered inbox organizer with local LLM classification for axiOS/NixOS |
| axiOS AI Chat | kcalvelli/axios-ai-chat | Python | In Development | Family XMPP chat with AI assistant for the axios ecosystem |
| axiOS DAV | kcalvelli/axios-dav | Python/Nix | In Development | Declarative CalDAV/CardDAV sync for NixOS with MCP integration |

### Commodore 64 Tools

Projects for Commodore 64 hardware and emulation

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| C64 Stream Viewer | kcalvelli/c64-stream-viewer | Python | Released (v1.0.0) | Wayland-native viewer for Ultimate64 video/audio streaming |
| Ultimate64 MCP | kcalvelli/Ultimate64MCP | Python | In Development | Flake to provide MCP server for Ultimate 64 series mainboards |
| C64 Terminal | kcalvelli/c64term | Nix | In Development | Terminal for Commodore 64 |

### MCP Servers

Model Context Protocol server implementations

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| MCP Journal | kcalvelli/mcp-journal | Python | In Development | Journal management via Model Context Protocol |
| Nix Devshell MCP | kcalvelli/nix-devshell-mcp | TypeScript/Node.js | In Development | Creation of Nix devshells via Model Context Protocol |
| MCP Gateway | kcalvelli/mcp-gateway | Python | In Development | Universal MCP Gateway - Aggregates MCP servers with REST, MCP HTTP transport, and OAuth2 authentication |

### Nix Packages

Flakes to provide packages not included in nixpkgs

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| Brave Previews | kcalvelli/brave-browser-previews | Nix | In Development | Nightly and Beta builds of Brave Browser with preview features |

### Documentation

Documentation and portfolio projects

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| Engineering Portal | kcalvelli/kcalvelli-portal | MkDocs/Python | In Development | Auto-updating portfolio site with GitHub discovery and architectural documentation |

### Tabletop Gaming

Tabletop RPG and gaming projects

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| Peregrinatio RPG | kcalvelli/peregrinatio-rpg | Markdown/Content | In Development | Tabletop RPG project |

### Calendar Tools

Calendar and scheduling applications

| Project | Repository | Tech Stack | Status | Description |
|---------|-----------|------------|--------|-------------|
| Orthoterm | kcalvelli/orthoterm | Rust | In Development | Orthodox calendar terminal application |

## MCP Server Topology

This ecosystem includes 6 MCP server implementations that provide AI tool access to various system capabilities.

### Server Inventory

| Server | Transport | Target System | Claude Integration |
|--------|-----------|--------------|-------------------|
| MCP Journal | STDIO | systemd journalctl | Direct (claude_desktop_config) |
| Nix Devshell MCP | STDIO | Nix/direnv | Direct (claude_desktop_config) |
| Ultimate64 MCP | STDIO | Ultimate 64 hardware (REST API) | Direct (claude_desktop_config) |
| axiOS AI Mail | STDIO | IMAP/SMTP email + Ollama LLM | Direct (claude_desktop_config) |
| axiOS DAV | STDIO | CalDAV/CardDAV servers (vdirsyncer) | Direct (claude_desktop_config) |
| MCP Gateway | HTTP+SSE | Aggregates other MCP servers | Proxy (OAuth2, REST) |

### Server Relationships

MCP Gateway acts as an aggregation layer that can proxy requests to any of the above STDIO-based servers, exposing them via HTTP transport with OAuth2 authentication. It imports `mcp-servers-nix` as a flake input for access to community MCP server packages.

### MCP Data Flow

Client (Claude Code / Claude Desktop)
  - Direct STDIO connection: Client starts MCP server process via STDIO, sends tool calls, receives results. Used for local development.
  - HTTP connection via MCP Gateway: Client connects to MCP Gateway over HTTP+SSE with OAuth2 auth. Gateway proxies requests to configured STDIO-based MCP servers. Used for remote/shared access.

## Integration Patterns

### Pattern: NixOS Module Composition

Projects in the axiOS ecosystem are composed as NixOS modules imported into a host flake configuration. axiOS provides the base system; ecosystem projects (axiOS Monitor, axiOS AI Mail, axiOS AI Chat, axiOS DAV) extend it declaratively. Each ecosystem project exports `nixosModules.default` and `homeManagerModules.default` for system-level and user-level configuration respectively.

Composition chain: User flake imports axiOS flake, applies overlays, enables ecosystem NixOS/home-manager modules.

Projects: axiOS, axiOS Monitor, axiOS AI Mail, axiOS AI Chat, axiOS DAV, MCP Gateway

### Pattern: MCP Bridge/Adapter

MCP servers follow a consistent three-layer pattern: Client (Claude) sends MCP tool calls to an MCP Server (Python or TypeScript adapter), which translates them into domain-specific operations on the Target System using its native protocol. Each server is packaged as a Nix flake with a `buildPythonApplication` or `buildNpmPackage` derivation.

Applied in: MCP Journal (Python, journalctl subprocess), Nix Devshell MCP (TypeScript, Nix CLI), Ultimate64 MCP (Python, REST API to hardware), axiOS AI Mail (Python, IMAP/SMTP), axiOS DAV (Python, vdirsyncer/CalDAV), MCP Gateway (Python/FastAPI, proxies other MCP servers)

### Pattern: Streaming Media Pipeline

Commodore 64 tools use a hardware-to-network-to-display pipeline. The Ultimate 64 hardware sends video frames and audio data over UDP on the local network. C64 Stream Viewer receives these UDP packets, performs VIC-II color conversion, and renders via Wayland/GStreamer. Separately, Ultimate64 MCP provides MCP tool access to the hardware's REST API for system control.

Projects: C64 Stream Viewer, Ultimate64 MCP, C64 Terminal

### Pattern: Nix Flake Distribution

All 14 code projects are packaged as Nix flakes (peregrinatio-rpg is content-only). This enables reproducible builds via `nix build`, development shells via `nix develop`, declarative system integration via NixOS modules, and cross-project dependency management via flake inputs. Projects consistently use `nixpkgs-unstable` as their nixpkgs channel.

Projects: All 14 code projects

## Technology Decisions

| Decision | Choice | Rationale | Projects |
|----------|--------|-----------|----------|
| OS Foundation | NixOS (axiOS) | Declarative, reproducible system configuration with rollbacks | All (axiOS base) |
| Package Management | Nix Flakes | Hermetic builds, pinned dependencies, composable inputs | All 14 code projects |
| MCP Server Language (primary) | Python | FastAPI/uvicorn ecosystem, rapid prototyping, rich library support | MCP Journal, Ultimate64 MCP, axiOS AI Mail, axiOS DAV, MCP Gateway |
| MCP Server Language (alt) | TypeScript/Node.js | npm ecosystem, template-driven code generation | Nix Devshell MCP |
| Stream Processing | Python + GStreamer | Media pipeline for UDP video/audio with VIC-II color conversion | C64 Stream Viewer |
| CLI Application | Rust | Performance, type safety, cross-platform binary | Orthoterm |
| Desktop Widget | QML/KDE | Native KDE Plasma integration, declarative UI | axiOS Monitor |
| AI Integration | Anthropic Claude API + Ollama | Cloud AI for chat, local LLM for email classification | axiOS AI Chat (Claude), axiOS AI Mail (Ollama) |
| Chat Protocol | XMPP (slixmpp) | Federated, self-hosted family messaging | axiOS AI Chat |
| Calendar/Contacts Sync | vdirsyncer + CalDAV/CardDAV | Standard protocols, offline-capable, MCP-accessible | axiOS DAV |
| MCP Transport (local) | STDIO | Simple, no auth overhead, process-level isolation | 5 MCP servers |
| MCP Transport (remote) | HTTP + SSE + OAuth2 | Remote access, multi-server aggregation, authentication | MCP Gateway |
| Documentation | MkDocs Material | Markdown-native, Mermaid C4 diagrams, GitHub Pages hosting | Engineering Portal |
| Database Migrations | Alembic/SQLAlchemy | Python-native schema management for email classification DB | axiOS AI Mail |

## Dependency Graph

### Flake Input Dependencies

nixpkgs (github:NixOS/nixpkgs)
  - All 14 code projects depend on nixpkgs (nixos-unstable or nixpkgs-unstable channel)

flake-utils (github:numtide/flake-utils)
  - axiOS, MCP Journal, Nix Devshell MCP, axiOS DAV, Orthoterm

home-manager (github:nix-community/home-manager)
  - axiOS (user-level configuration via home-manager modules)
  - axiOS DAV (declarative calendar/contacts user config)

flake-parts (github:hercules-ci/flake-parts)
  - axiOS (flake structure and perSystem composition)

rust-overlay (github:oxalica/rust-overlay)
  - axiOS (Rust toolchain for devshells and lanzaboote)
  - Orthoterm (Rust toolchain management)

mcp-servers-nix (github:natsukium/mcp-servers-nix)
  - axiOS (community MCP server packages)
  - MCP Gateway (community MCP server packages)

### Cross-Project Dependencies (Confirmed via axiOS flake.nix inputs)

axiOS (kcalvelli/axios) directly imports 9 ecosystem projects as flake inputs:
  - axiOS Monitor (github:kcalvelli/axios-monitor) -- DMS monitoring widget
  - MCP Journal (github:kcalvelli/mcp-journal) -- systemd journal MCP server
  - Nix Devshell MCP (github:kcalvelli/nix-devshell-mcp) -- Nix devshell MCP server
  - C64 Terminal (github:kcalvelli/c64term) -- Commodore 64 terminal
  - Brave Previews (github:kcalvelli/brave-browser-previews) -- Brave nightly/beta builds
  - axiOS AI Mail (github:kcalvelli/axios-ai-mail) -- AI email management
  - axiOS DAV (github:kcalvelli/axios-dav) -- CalDAV/CardDAV sync with MCP
  - MCP Gateway (github:kcalvelli/mcp-gateway) -- MCP server aggregator
  - axiOS AI Chat (github:kcalvelli/axios-ai-chat) -- XMPP chat with AI assistant

### axiOS External Dependencies

Beyond ecosystem projects, axiOS imports these external flake inputs:
  - nixos-hardware (github:NixOS/nixos-hardware) -- hardware-specific NixOS modules
  - agenix (github:ryantm/agenix) -- secret management
  - lanzaboote (github:nix-community/lanzaboote) -- Secure Boot support
  - niri (github:sodiboo/niri-flake) -- Wayland scrollable compositor
  - quickshell (github:quickshell-mirror/quickshell) -- DMS Shell framework
  - dankMaterialShell (github:AvengeMedia/DankMaterialShell) -- DMS desktop shell
  - dsearch (github:AvengeMedia/danksearch) -- DMS search
  - vscode-server (github:nix-community/nixos-vscode-server) -- remote VS Code support
  - fenix (github:nix-community/fenix) -- Rust toolchain (alternative)
  - zig-overlay (github:mitchellh/zig-overlay) -- Zig dev toolchain
  - antigravity-nix (github:jacopone/antigravity-nix) -- Google's agentic IDE
  - devshell (github:numtide/devshell) -- development shell framework
  - treefmt-nix (github:numtide/treefmt-nix) -- code formatting

### Runtime Dependencies

MCP Gateway
  - Can proxy: MCP Journal, Nix Devshell MCP, Ultimate64 MCP, axiOS AI Mail, axiOS DAV
  - Protocol: Aggregates STDIO-based MCP servers, exposes via HTTP+SSE

Ultimate64 MCP
  - Ultimate 64 hardware (REST API over LAN)

C64 Stream Viewer
  - Ultimate 64 hardware (UDP video/audio stream over LAN)

axiOS AI Chat
  - Anthropic Claude API (AI responses)
  - XMPP server (Prosody, managed via NixOS module)

axiOS AI Mail
  - IMAP/SMTP server (email access)
  - Ollama (local LLM for email classification)
  - SQLite/Alembic (classification database)

axiOS DAV
  - CalDAV/CardDAV server (calendar and contacts sync via vdirsyncer)

## Maintenance Status

| Project | Latest Release | Release Count | Health |
|---------|---------------|---------------|--------|
| axiOS | v2026.01.13 | 14 | Active |
| axiOS Monitor | - | 0 | In Development |
| Brave Previews | - | 0 | In Development |
| C64 Stream Viewer | v1.0.0 | 1 | Active |
| Ultimate64 MCP | - | 0 | In Development |
| MCP Journal | - | 0 | In Development |
| C64 Terminal | - | 0 | In Development |
| Nix Devshell MCP | - | 0 | In Development |
| axiOS AI Mail | - | 0 | In Development |
| Engineering Portal | - | 0 | In Development |
| axiOS AI Chat | - | 0 | In Development |
| MCP Gateway | - | 0 | In Development |
| axiOS DAV | - | 0 | In Development |
| Peregrinatio RPG | - | 0 | In Development |
| Orthoterm | - | 0 | In Development |
